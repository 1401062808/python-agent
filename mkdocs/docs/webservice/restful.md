# RESTFUL架构

### 一、简介
&emsp;&emsp;Restful 作为一种良好的架构设计风格，具有结构清晰、易于扩展的特性，因而获得了很多公司站点的采用。

&emsp;&emsp;Restful 最早由 HTTP 协议的主要设计者 Roy Thomas Fielding 提出，所以 Restful 虽然作为一种架构风格理论上完全可以架空而独立存在，但从它的内容上，我们都可以看到这种设计风格都是与 HTTP 协议高度契合的，这也是为什么几乎所有 Restful 风格的服务实现上，都是采用的 HTTP/HTTPS 协议。

&emsp;&emsp;Rest 全称 Representational State Transfer，如果我们不嫌啰嗦的直接翻译这样的一句话，那么应该是“（资源）在表现层的状态转换”。所谓的表现层，其实就是资源在传输过程中的具体表现形式——可以是最为常用的JSON串，也可以是XML、HTML等，对于一些特殊资源如图像，则可以表现为JPG，PNG等形式。

&emsp;&emsp;而整个REST的核心，则是在被省略的“资源”二字上，所谓的 Web 请求，在这里都是对资源的交互。

### 二、实现
&emsp;&emsp;在 REST 里，把请求或是操作的对象都当作一类资源。每一个 URL 对应了一类资源，如：

    http://service/api/student          获取学生信息
    http://service/api/student/name     获取学生姓名信息
有的接口设计会把 API 版本信息放在 URI 里，个人认为版本信息可以放在 Header 里，接口看上去可以比较优雅，并且具有兼容性。URL 参数表示资源属性，如：

    http://service/api/student?id=20    获取 id 为20的学生信息
而与资源交互的基本操作则包括：
   
    GET     获取资源
    POST    新建资源，或更新资源
    PUT     更新资源
    DELETE  删除资源
看到这里或许会有莫名的似曾相识，这就是为什么之前说它与 HTTP 协议高契合，所以资源的请求状态也同样使用的与 HTTP 中类似的状态码信息返回。

### 三、常用返回码
原则上不鼓励使用 5 开头的返回码，因为 5 开头的 HTTP 码一般对应的是服务的内部错误。

| 参数 | 说明 |
| --- | --- |
| 200 | 资源获取成功 |
| 201 | 资源新建或修改成功 |
| 202 | 请求已接收，通常用作异步处理对象 |
| 203 | 请求成功，单非官方信息，用于缓存数据或其它情况 |
| 204 | 请求无需返回实体，通常用作删除成功 |
| 206 | 返回的是部分结果 |
| 400 | 用户发出的请求有错误，服务器没有进行新建或修改数据的操作 |
| 401 | 没有权限，通常在确认身份（普通用户／管理员等）时使用 |
| 403 | 禁止访问，没有确认身份无法访问，或资源不对外开放 |
| 404 | 资源不存在 |
| 405 | 该资源不支持该方法 |
| 406 | 请求的表现层不支持，如对仅支持 JSON 的服务请求 XML 格式 |
| 408 | 请求超时 |
| 409 | 冲突，通常用在修改资源(PUT)时发生冲突 |
| 410 | 请求的资源被删除 |
| 411 | 资源大小未知，通常用作修改或上传资源时，取不到资源大小 |
| 412 | 先决条件错误，对资源操作的时机或条件不满足 |
| 413 | 添加或修改资源时，上传的资源过大 |
| 414 | 请求的 URI 过长 |
| 415 | 不支持的媒体格式 |
| 416 | 请求范围不满足 |
| 422 | 请求资源的内容有语义错误 |
| 423 | 资源被锁定 |
| 424 | 由于之前的错误导致这个请求失败 |
